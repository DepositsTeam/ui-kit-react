{"version":3,"file":"TagInput.stories-c506a8b2.js","sources":["../../src/components/tag-input/TagInput.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport Box from \"../box\";\nimport Text from \"../text\";\nimport \"./Taginput.scss\";\nimport classNames from \"../../utils/classNames\";\nimport Icon from \"../icon\";\nimport Close from \"../icons/Close.jsx\";\nimport PropTypes from \"prop-types\";\nimport keyGen from \"../../utils/keyGen\";\nimport TextField from \"../text-field\";\n\nconst TagInput = ({\n  label,\n  className,\n  size,\n  tagDelimiterKey,\n  values,\n  onTagAdded,\n  onTagDeleted,\n  inputProps,\n  tagProps = {},\n  tagClassname,\n  onTextChanged,\n  onTagChanged,\n  ...props\n}) => {\n  const [input, setInput] = useState(\"\");\n  const [inputTags, setInputTags] = useState(values || []);\n  const [isKeyReleased, setIsKeyReleased] = useState(false);\n\n  const invokeFunction = (func, ...args) => {\n    if (typeof func === \"function\") {\n      return func(...args);\n    }\n  };\n\n  const _tagDelimiterKey = {\n    space: \" \",\n    enter: \"Enter\",\n    comma: \",\",\n  };\n\n  const generatedTagInputClasses = classNames({\n    \"ui-tag-input__input\": true,\n  });\n\n  const wrapperClasses = classNames(\n    [`size__${size}`, \"ui-tag-input__wrapper\"],\n    className\n  );\n\n  const handleTextChange = (event) => {\n    setInput(event.target.value);\n    invokeFunction(onTextChanged, event.target.value);\n  };\n\n  const handleKeyDown = (event) => {\n    const newTag = input.trim();\n    let oldTagArray = inputTags;\n    const key = _tagDelimiterKey[tagDelimiterKey];\n    if (event.key === key && newTag.length && !inputTags.includes(newTag)) {\n      event.preventDefault();\n      setInputTags((prev) => [...prev, newTag]);\n      setInputTags((state) => {\n        invokeFunction(onTagAdded, newTag, state);\n        invokeFunction(onTagChanged, oldTagArray, state);\n        return state;\n      });\n      setInput(\"\");\n    }\n\n    if (\n      event.key === \"Backspace\" &&\n      !input.length &&\n      inputTags.length &&\n      isKeyReleased\n    ) {\n      event.preventDefault();\n      const tagsArray = [...inputTags];\n      const deletedTag = tagsArray.pop();\n      setInputTags(tagsArray);\n      setInput(deletedTag);\n      setInputTags((state) => {\n        invokeFunction(onTagDeleted, deletedTag, state);\n        invokeFunction(onTagChanged, oldTagArray, state);\n        return state;\n      });\n    }\n    setIsKeyReleased(false);\n  };\n\n  const handleDeleteTag = (index) => {\n    const deletedTag = inputTags[index];\n    let oldTagArray = inputTags;\n    setInputTags((prev) => prev.filter((tag, i) => i !== index));\n    setInputTags((state) => {\n      invokeFunction(onTagDeleted, deletedTag, state);\n      invokeFunction(onTagChanged, oldTagArray, state);\n      return state;\n    });\n  };\n\n  return (\n    <Box className={wrapperClasses}>\n      <Box is={\"label\"}>\n        <Text className={\"ui-tag-input__label\"} scale={\"subhead\"}>\n          {label}\n        </Text>\n      </Box>\n      <Box className=\"ui-tag-input__input-wrapper\">\n        {inputTags.map((tag, index) => (\n          <Box\n            is=\"div\"\n            className={`ui-tag-input__input-tag ${tagClassname}`}\n            key={`ui-tag-input${keyGen()}`}\n            {...tagProps}\n          >\n            <Text\n              className=\"ui-tag-input__input-tag-text\"\n              scale={\"subhead\"}\n              fontFace={\"circularSTD\"}\n            >\n              {tag}\n            </Text>\n            <Icon\n              icon={Close}\n              onClick={() => handleDeleteTag(index)}\n              className=\"ui-tag-input__close-icon\"\n            />\n          </Box>\n        ))}\n        <TextField\n          className={generatedTagInputClasses}\n          {...props}\n          invisible\n          size={size}\n          {...inputProps}\n          onKeyDown={handleKeyDown}\n          onKeyUp={() => setIsKeyReleased(true)}\n          value={input}\n          onChange={handleTextChange}\n          autoFocus\n          onFocus={(e) => e.currentTarget.select()}\n        />\n      </Box>\n    </Box>\n  );\n};\n\nexport default TagInput;\n\nTagInput.propTypes = {\n  label: PropTypes.string,\n  size: PropTypes.oneOf([\n    \"small\",\n    \"medium\",\n    \"large\",\n    \"xlarge\",\n    \"huge\",\n    \"massive\",\n  ]),\n  values: PropTypes.array,\n  tagDelimiterKey: PropTypes.oneOf([\"enter\", \"comma\", \"space\"]),\n  onTagAdded: PropTypes.func,\n  onTagDeleted: PropTypes.func,\n  onTextChanged: PropTypes.func,\n  onTagChanged: PropTypes.func,\n  inputProps: PropTypes.object,\n  tagProps: PropTypes.object,\n  tagClassname: PropTypes.string,\n};\n\nTagInput.defaultProps = {\n  label: \"Form Label\",\n  size: \"medium\",\n  values: [],\n  tagDelimiterKey: \"enter\",\n  inputProps: { placeholder: \"Add tag\" },\n  onTagDelete: (index) => {\n    console.log(index);\n  },\n};\n"],"names":["TagInput","label","className","size","tagDelimiterKey","values","onTagAdded","onTagDeleted","inputProps","tagProps","tagClassname","onTextChanged","onTagChanged","props","input","setInput","useState","inputTags","setInputTags","isKeyReleased","setIsKeyReleased","invokeFunction","func","args","_tagDelimiterKey","generatedTagInputClasses","classNames","wrapperClasses","handleTextChange","event","handleKeyDown","newTag","oldTagArray","key","prev","state","tagsArray","deletedTag","handleDeleteTag","index","tag","i","jsxs","Box","jsx","Text","Icon","Close","keyGen","TextField","e","TagInput$1","PropTypes"],"mappings":"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"}