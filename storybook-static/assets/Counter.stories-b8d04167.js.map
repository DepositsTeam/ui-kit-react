{"version":3,"file":"Counter.stories-b8d04167.js","sources":["../../src/components/counter/Counter.jsx"],"sourcesContent":["import React from \"react\";\nimport classNames from \"../../utils/classNames\";\nimport \"../../scss/textfield.scss\";\nimport \"./Counter.scss\";\nimport PropTypes from \"prop-types\";\nimport { useState, useEffect } from \"react\";\nimport number_format from \"../../utils/number_format\";\nimport Box from \"../box\";\nimport Text from \"../text\";\nimport { Error as ErrorIcon } from \"../icons\";\n\nconst Counter = ({\n  label,\n  size,\n  max,\n  min,\n  errorMessage,\n  coloredButtons,\n  labelClass,\n  labelFontFace,\n  inputClass,\n  disabled,\n  decimal,\n  alterMagnitude,\n  spacing,\n  value,\n  onChange,\n  className,\n  ...props\n}) => {\n  const [internalValue, setInternalValue] = useState(null);\n  const [formattedValue, setFormattedValue] = useState(0);\n\n  useEffect(() => {\n    setInternalValue(value);\n  }, []);\n\n  useEffect(() => {\n    if (onChange && typeof onChange === \"function\") {\n      onChange(internalValue);\n    }\n    if (decimal) {\n      setFormattedValue(number_format(internalValue, 2));\n    } else {\n      setFormattedValue(internalValue);\n    }\n  }, [internalValue]);\n\n  const increase = () => {\n    const temp = internalValue + alterMagnitude;\n    setInternalValue((max === 0 || !!max) && temp >= max ? max : temp);\n  };\n  const decrease = () => {\n    const temp = internalValue - alterMagnitude;\n    setInternalValue((min === 0 || !!min) && temp <= min ? min : temp);\n  };\n\n  return (\n    <Box\n      className={`ui-counter ${className ?? className}`}\n      style={{\n        \"--counter-spacing\": spacing,\n      }}\n    >\n      <Box className={classNames([\"ui-text-field__wrapper\", `size__${size}`])}>\n        {!!label && (\n          <Box is=\"label\">\n            <Text\n              marginTop=\"0px\"\n              className={classNames({\n                \"ui-text-field__label\": true,\n                [labelClass]: labelClass,\n              })}\n              scale=\"subhead\"\n              fontFace={labelFontFace}\n            >\n              {label}\n            </Text>\n          </Box>\n        )}\n        <Box className=\"ui-text-field__input-wrapper\">\n          <Box\n            is={\"button\"}\n            className={classNames({\n              \"ui-text-field--counter_input_button left\": true,\n              coloredButtons,\n            })}\n            onClick={decrease}\n          >\n            -\n          </Box>\n          <Box\n            is={\"input\"}\n            className={classNames({\n              \"ui-text-field__input\": true,\n              \"has-error\": errorMessage,\n              disabled,\n              [inputClass]: true,\n            })}\n            value={formattedValue}\n            readonly\n            {...props}\n          />\n          <Box\n            is={\"button\"}\n            className={classNames({\n              \"ui-text-field--counter_input_button right\": true,\n              coloredButtons,\n            })}\n            onClick={increase}\n          >\n            +\n          </Box>\n        </Box>\n        {!!errorMessage && (\n          <Box className=\"ui-text-field__error\">\n            <ErrorIcon className=\"ui-text-field__error-icon\" />\n            <Text\n              className=\"ui-text-field__error-text\"\n              scale=\"subhead\"\n              fontFace=\"circularSTD\"\n            >\n              {errorMessage}\n            </Text>\n          </Box>\n        )}\n      </Box>\n    </Box>\n  );\n};\n\nexport default Counter;\n\nCounter.propTypes = {\n  label: PropTypes.string,\n  size: PropTypes.oneOf([\n    \"small\",\n    \"medium\",\n    \"large\",\n    \"xlarge\",\n    \"huge\",\n    \"massive\",\n  ]),\n  errorMessage: PropTypes.string,\n  coloredButtons: PropTypes.bool,\n  labelClass: PropTypes.string,\n  inputClass: PropTypes.string,\n  disabled: PropTypes.bool,\n  decimal: PropTypes.bool,\n  alterMagnitude: PropTypes.number,\n  spacing: PropTypes.string,\n  value: PropTypes.number,\n  onChange: PropTypes.func,\n  max: PropTypes.number,\n  min: PropTypes.number,\n};\n\nCounter.defaultProps = {\n  size: \"huge\",\n  spacing: \"16px\",\n  alterMagnitude: 1,\n  value: 0,\n};\n"],"names":["Counter","label","size","max","min","errorMessage","coloredButtons","labelClass","labelFontFace","inputClass","disabled","decimal","alterMagnitude","spacing","value","onChange","className","props","internalValue","setInternalValue","useState","formattedValue","setFormattedValue","useEffect","number_format","increase","temp","decrease","jsx","Box","jsxs","classNames","Text","ErrorIcon","Counter$1","PropTypes"],"mappings":"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"}